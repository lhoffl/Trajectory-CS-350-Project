package VIew;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

import Model.Game;
import Model.Planet;
import Model.PlanetType;

public class InitializePlanet extends JDialog implements ActionListener{

	private JLabel planetName;
	private JLabel gravityLabel;
	private JLabel nameLabel;
	private JPanel mainPanel;
	private JTextField nameField;
	private JTextField gravityField;
	private JButton create;
	private JComboBox list;
	private Planet planet;
	private double gravity;
	private double[] gravityList = {3.7, 8.9, 9.8, 3.7, 24.9, 10.4, 8.9, 11.1, .58};
	private PlanetType[] planetList = PlanetType.values();
	private Game game;

	public InitializePlanet(){

		list = new JComboBox(planetList);
		//list.insertItemAt("", 0);
		//planet = new Planet(list.getSelectedItem(), list.getSelectedItem(),  );
		planetName = new JLabel("Choose Planet: ");
		nameLabel = new JLabel("Name: ");
		nameLabel.setEnabled(false);
		gravityLabel = new JLabel("Gravity: " );
		gravityLabel.setEnabled(false);
		nameField = new JTextField(10);
		nameField.setEnabled(false);
		gravityField = new JTextField(10);
		gravityField.setEnabled(false);
		gravityField.setText("3.7");
		mainPanel = new JPanel(new GridLayout(3,2));
		create = new JButton("Create");

		setLayout(new BorderLayout());
		add(mainPanel, BorderLayout.NORTH);
		mainPanel.add(planetName);
		mainPanel.add(list);
		mainPanel.add(nameLabel);
		mainPanel.add(nameField);
		mainPanel.add(gravityLabel);
		mainPanel.add(gravityField);
		add(create, BorderLayout.SOUTH);


		create.addActionListener(this);
		list.addActionListener(this);

		setModal(true);
		pack();
		setVisible(true);
		setResizable(false);
		setTitle("Create Planet");
		setDefaultCloseOperation(DISPOSE_ON_CLOSE);
	}

	@Override
	public void actionPerformed(ActionEvent event) {

		JComponent e = (JComponent)event.getSource();

		PlanetType type = PlanetType.Earth;

		//Create Planet
		if(e == create){


			planet = new Planet(type);
			double value = 0;

			for(int i = 0; i < planetList.length; i++){
				if(planetList[i] == list.getSelectedItem()){
					type = planetList[i];
					value = gravityList[i];
				}
			}
			System.out.println(type);
			planet.setType(type);
			//game.setGravity(value);
			dispose();
		}

		//If custom is selected, enable fields
		if(planetList[9] == list.getSelectedItem()){
			nameLabel.setEnabled(true);
			nameField.setEnabled(true);
			gravityLabel.setEnabled(true);
			gravityField.setEnabled(true);
			gravityField.setText("");
		}

		//If custom is not selected, disable fields
		else {
			nameLabel.setEnabled(false);
			nameField.setEnabled(false);
			gravityLabel.setEnabled(false);
			gravityField.setEnabled(false);

			for(int i = 0; i < planetList.length; i++){
				if(planetList[i] == list.getSelectedItem()){
					gravityField.setText("" + gravityList[i]);
				}
			}

		}
		//System.out.println(list.getSelectedItem());
		//planet.setType(list.getSelectedItem());
		//gravity = planet.getGravity();
	}

}
